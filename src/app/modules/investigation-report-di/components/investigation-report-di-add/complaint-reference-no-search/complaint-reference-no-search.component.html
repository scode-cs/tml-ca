<div class="page-container">

  <!-- start div for breadcrumb-->
  <div>
    <ol class="breadcrumb breadcrumb-custom">
      <li class="breadcrumb-item">
        <a href="#/home">
          <i class="fa fa-home"></i> Home </a>
      </li>
      <li class="breadcrumb-item active">{{title}}</li>
    </ol>
  </div>
  <!-- end div for breadcrumb-->

  <!-- main div -->
  <div>
    <!-- start div for row complaint-form class-->
    <!-- start div for cust code ,custname ,sales group, sales offcice -->
    <div class="row complaint-form">
      <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" style="display:inline-block;" *ngIf="custCode">
          <label class="hideextra">Customer Code:&nbsp;&nbsp;
            <b class="hideextra">{{custCode}}</b>
          </label>
        </div>

        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" style="display:inline-block;" *ngIf="custName">
          <label class="hideextra">Customer Name:&nbsp;&nbsp;
            <b class="hideextra"> {{custName}}</b>
          </label>
        </div>
      </div>

      <div class=" col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4" style="display:inline-block;" *ngIf="salesGroup">
          <label>Sales Group:&nbsp;&nbsp;
            <b>{{salesGroup}}</b>
          </label>
        </div>

        <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4" style="display:inline-block;" *ngIf="salesOffice">
          <label>Sales Office:&nbsp;&nbsp;
            <b>{{salesOffice}}</b>
          </label>
        </div>
      </div>
    </div>
    <!-- end of custcode.custname,sales group,sales office div -->

    <!-- start div for complaintRegister body-->
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <!--start form for complaintRegisterFormGroup-->
      <form [formGroup]="complaintRegisterFormGroup" autocomplete="off">
        <!--start div for Complaint Type-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" style="display:inline-block">
          <label>Complaint Type</label>
          <select class="custom-select col-xs-12 col-sm-6 col-md-6 col-lg-4" formControlName="complaintTypeId" (change)="onComplaintTypeSelect($event,$event.target.value)"
            required>
            <option *ngFor="let cmpType of complaintTypeDropDownList" value="{{ cmpType.Key}}">{{ cmpType.Value }}</option>
          </select>
          <!--start div for Complaint Type alert-->
          <div class="alert alert-danger" *ngIf="complaintRegisterFormGroup.get('complaintTypeId').hasError('required') && complaintRegisterFormGroup.get('complaintTypeId').touched">
            <i class="fa fa-exclamation-circle"></i> Complaint Type is required!
          </div>
          <!--end div for Complaint Type alert-->
        </div>
        <!--end div for Complaint Type-->

        <!--start div for Nature of Complaint-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" style="display:inline-block">
          <label>Nature of Complaint</label>
          <select class="custom-select col-xs-12 col-sm-6 col-md-6 col-lg-4" formControlName="natureOfComplaintId" (change)="onNatureTypeSelect($event)"
            required>
            <option *ngFor="let natureCmp of natureOfComDropDownList" value="{{ natureCmp.Key }}">{{ natureCmp.Value }}</option>
          </select>
          <!--start div for Nature of Complaint alert-->
          <div class="alert alert-danger" *ngIf="complaintRegisterFormGroup.get('natureOfComplaintId').hasError('required') && complaintRegisterFormGroup.get('natureOfComplaintId').touched">
            <i class="fa fa-exclamation-circle"></i> Nature of Complaint is required!
          </div>
          <!--end div for Nature of Complaint alert-->
        </div>
        <!--end div for Nature of Complaint-->

        <!--start div for Detail of Complaint-->
        <div class="form-group col-xs-12 col-sm-6 col-md-6 col-lg-4" style="display:inline-block">
          <label>Detail of Complaint</label>
          <textarea id="detailOfComplaint" rows="5" class="form-control hide-horizontal-scroll" #complaintDetails formControlName="complaintDetails"
            (keyup)="comDetsOnkeyup(complaintDetails.value)"></textarea>
          <!-- [maxlength]="complaintDetailsLength"  -->
          <!--start div for Detail of Complaint alert-->
          <div class="alert alert-danger" *ngIf="complaintRegisterFormGroup.get('complaintDetails').touched && complaintDetailsEnable==true">
            <i class="fa fa-exclamation-circle"></i> Detail of Complaint is required!
          </div>
        </div>
        <!--end div for Detail of Complaint-->
      </form>
      <!-- end of form -->
    </div>
    <!-- end of div form -->

    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" style="float: right;">
        <label class="hideextra">No. of Selected Official Document Details:&nbsp;&nbsp;
          <b>{{selectedInvDet.length}}</b>
        </label>
      </div>
    </div>
    <!-- end div for cust code ,custname ,sales group, sales offcice and nos of selected items row -->
    <!-- start div for not selected invoice details heading -->
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="allInvDetDefault.length!=0" style="text-align:center;">
      <span>
        <b>Official Document Details:</b>
      </span>
    </div>
    <!-- end div for not selected invoice details heading -->

    <!-- start  all and not selected invoice table div -->
    <div class="col-lg-12 col-md-12 col-xs-12 scroll-bar" style="margin-bottom: 15px; margin-top: 5px;" *ngIf="allInvDetDefault.length!=0">
      <table class="table-style">
        <thead>
          <tr class="th-style">
            <td class="header-style-first hideextra">
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.invoiceNo}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.invoiceDate}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.itemCode}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.itemName}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.invoiceQtyInMtrs}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.customerSegment}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.usageGroup}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.stateOrRegion}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.poNo}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.soNo}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.inspectionVendorName}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.loadingVendorName}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.truckNo}}
            </td>
          </tr>
        </thead>
        <tbody>
          <tr class="tr-style" *ngFor=" let itemDet of allInvDetDefault
              let odd = odd; let even = even;" [ngClass]="{even: even, odd: odd }">
            <td class="td-style-first">
              <ng-container *ngIf="complaintTypeName  && complaintTypeId && natureCmpName && !complaintDetailsEnable then thenblock; else elseblock">
              </ng-container>
              <ng-template #thenblock>
                <input type="checkbox" (click)="onCheckInvoiceNo(itemDet,itemDet.invoiceNo,itemDet.itemCode)"/>
              </ng-template>
              <ng-template #elseblock>
              </ng-template>
            </td>
            <td class="td-style">
              {{itemDet.invoiceNo}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.invoiceDate|date: 'dd-MMM-yyyy'}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.itemCode}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.itemName}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.invoiceQtyInMtrs}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.customerSegment}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.usageGroup}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.stateOrRegion}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.poNo}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.soNo}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.inspectionVendorName}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.loadingVendorName}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.truckNo}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!--end of all invoice details and not selected table div-->

    <!-- start div for  selected invoice details heading -->
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" *ngIf="selectedInvDet.length!=0" style="text-align:center;">
      <span>
        <b>Selected Official Document Details:</b>
      </span>
    </div>
    <!-- end div for selected invoice details heading -->

    <!-- start selected invoice details  table div -->
    <div class="col-lg-12 col-md-12 col-xs-12 scroll-bar" style="margin-bottom: 15px; margin-top: 5px;" *ngIf="selectedInvDet.length!=0">
      <table class="table-style">
        <thead>
          <tr class="th-style">
            <td class="header-style-first hideextra">
            </td>
            <td class="header-style hideextra">
                Complaint Type
                <!-- {{invDetailsItemsHeader.complaintTypeDesc}} -->
            </td>
            <td class="header-style hideextra">
                Nature of Complaint
                <!-- {{invDetailsItemsHeader.natureOfComplaintDesc}} -->
            </td>
            <td class="header-style hideextra">
                Detail of Complaint
                <!-- {{invDetailsItemsHeader.complaintDetails}} -->
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.invoiceNo}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.invoiceDate}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.itemCode}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.itemName}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.invoiceQtyInMtrs}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.customerSegment}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.usageGroup}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.stateOrRegion}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.poNo}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.soNo}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.inspectionVendorName}}
            </td>

            <td class="header-style hideextra">
              {{invDetailsItemsHeader.loadingVendorName}}
            </td>
            <td class="header-style hideextra">
              {{invDetailsItemsHeader.truckNo}}
            </td>
          </tr>
        </thead>
        <tbody>
          <tr class="tr-style" *ngFor=" let itemDet of selectedInvDet
                      let odd = odd; let even = even;" [ngClass]="{even: even, odd: odd }">
            <td class="td-style-first">
              <button aria-label="Close" class="close" type="button" (click)="onCloseInvoiceNo(itemDet,itemDet.invoiceNo,itemDet.itemCode)">
                <span aria-hidden="true">Ã—</span>
              </button>
            </td>
            <td class="td-style hideextra">
                {{itemDet.complaintTypeDesc}}
            </td>
            <td class="td-style hideextra">
                {{itemDet.natureOfComplaintDesc}}
            </td>
            <td class="td-style hideextra">
                {{itemDet.complaintDetails}}
            </td>
            <td class="td-style">
              {{itemDet.invoiceNo}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.invoiceDate|date: 'dd-MMM-yyyy'}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.itemCode}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.itemName}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.invoiceQtyInMtrs}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.customerSegment}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.usageGroup}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.stateOrRegion}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.poNo}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.soNo}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.inspectionVendorName}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.loadingVendorName}}
            </td>
            <td class="td-style hideextra">
              {{itemDet.truckNo}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!--end of selected invoice details table div-->

    <!-- start  outer div for Submit and Cancel button -->
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <!-- start div for Submit Button-->
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" *ngIf="selectedInvDet.length!=0" style="display:inline-block;">
        <button type="submit" class="btn btn-primary primary-button-style" (click)="onSubmitSelectedInvDet()">Select Invoice
        </button>
      </div>
      <!-- end div for Submit Button-->

      <!-- start div for Cancel Button-->
      <div class="col-xs-12 col-sm-4 col-md-4 col-lg-2" style="display:inline-block;" *ngIf="allInvDetDefault.length!=0 || selectedInvDet.length!=0">
        <button type="submit" class="btn default-button-style" (click)="onCancel()">
          Cancel
        </button>
      </div>
      <!-- end div for Cancel Button-->
    </div>
    <!-- end outer div for Submit and Cancel button -->
  </div>
  <!-- end of main div -->
</div>
<!-- end div for page-container class-->

<!-- start div for busy spinner -->
<ispl-busy-spinner *ngIf="busySpinner">
</ispl-busy-spinner>
<!-- end div for busy spinner -->